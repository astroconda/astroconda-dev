{% set name = 'jwst_pipeline' %}
{% set version = GIT_DESCRIBE_TAG ~ ".dev" ~ GIT_DESCRIBE_NUMBER ~ "+" ~ GIT_DESCRIBE_HASH %}
{% if version[0] == 'v' %}
{%   set version = version[1:] %}
{% endif %}
{% set number = '3' %}

about:
    home: ssh://git@bitbucket.org/stsci_ssb/jwst.git
    license: BSD
    summary: jwst_pipeline

build:
    number: {{ number }}
    preserve_egg_dir: 'True'

package:
    name: {{ name }}
    version: {{ version }}

requirements:
    build:
    - d2to1
    - astropy
    - asdf
    - crds
    - cython
    - dask
    - drizzle
    - drizzlepac
    - gwcs
    - jwst_lib
    - matplotlib
    - photutils
    - scipy
    - stsci.distutils
    - setuptools
    - numpy {{ numpy }}
    - python {{ python }}

    run:
    - astropy
    - asdf
    - crds
    - cython
    - dask
    - drizzle
    - drizzlepac
    - gwcs
    - jwst_lib
    - matplotlib
    - photutils
    - scipy
    - numpy
    - python

source:
    git_url: ssh://git@bitbucket.org/stsci_ssb/jwst.git

test:
    imports:
    - jwst_pipeline
